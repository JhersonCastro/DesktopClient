<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.collections.FXCollections?>

<?import java.lang.String?>
<?import java.net.URL?>
<ScrollPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.fronted.controllers.DocenteNuevoFormatoAController"
            fitToWidth="true"
            hbarPolicy="NEVER"
            styleClass="formato-a-scrollpane">

    <stylesheets>
        <URL value="@../../css/formulario-formato-a.css"/>
    </stylesheets>

    <VBox styleClass="formato-a-container" spacing="25">

        <!-- Encabezado -->
        <VBox styleClass="formato-a-header" spacing="10">
            <HBox spacing="15" alignment="CENTER_LEFT">
                <ImageView fitWidth="40" fitHeight="40" preserveRatio="true">
                    <Image url="@../../images/format-a.png"/>
                </ImageView>
                <VBox spacing="5">
                    <Label text="Nuevo Formato A" styleClass="formato-a-title"/>
                    <Label text="Complete el formulario para iniciar un nuevo proyecto de grado"
                           styleClass="formato-a-subtitle"/>
                </VBox>
            </HBox>

            <!-- Indicador de paso -->
            <HBox styleClass="formato-a-step-indicator" spacing="10" alignment="CENTER_LEFT">
                <Label text="Paso 1: Información básica" styleClass="formato-a-step-label"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="* Campos obligatorios" styleClass="formato-a-required-label"/>
            </HBox>
        </VBox>

        <!-- Contenedor principal del formulario -->
        <GridPane styleClass="formato-a-grid" hgap="25" vgap="20">
            <columnConstraints>
                <ColumnConstraints prefWidth="200" halignment="RIGHT"/>
                <ColumnConstraints prefWidth="450" hgrow="ALWAYS"/>
            </columnConstraints>

            <!-- 1. Selección de Estudiante -->
            <Label text="* Estudiante:" GridPane.rowIndex="0" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <VBox spacing="10" GridPane.rowIndex="0" GridPane.columnIndex="1">
                <ComboBox fx:id="estudianteComboBox" promptText="Buscar estudiante por nombre o email..."
                          styleClass="formato-a-autocomplete" editable="true"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <ImageView fitWidth="16" fitHeight="16">
                        <Image url="@../../images/icons/info.png"/>
                    </ImageView>
                    <Label text="Si el estudiante no aparece, debe registrarse primero en el sistema"
                           styleClass="formato-a-hint"/>
                </HBox>
            </VBox>

            <!-- 2. Título del Proyecto -->
            <Label text="* Título del Proyecto:" GridPane.rowIndex="1" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <TextField fx:id="tituloTextField" GridPane.rowIndex="1" GridPane.columnIndex="1"
                       promptText="Ej: Sistema de gestión de proyectos de grado para la Universidad del Cauca"
                       styleClass="formato-a-textfield"/>

            <!-- 3. Modalidad -->
            <Label text="* Modalidad:" GridPane.rowIndex="2" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <VBox spacing="10" GridPane.rowIndex="2" GridPane.columnIndex="1">
                <HBox spacing="30">
                    <RadioButton fx:id="radioInvestigacion" text="Investigación"
                                 userData="INVESTIGACION" selected="true"
                                 styleClass="formato-a-radiobutton">
                        <tooltip>
                            <Tooltip text="Proyecto de investigación académica" styleClass="formato-a-tooltip"/>
                        </tooltip>
                    </RadioButton>
                    <RadioButton fx:id="radioPracticaProfesional" text="Práctica Profesional"
                                 userData="PRACTICA_PROFESIONAL"
                                 styleClass="formato-a-radiobutton">
                        <tooltip>
                            <Tooltip text="Proyecto realizado en empresa con carta de aceptación" styleClass="formato-a-tooltip"/>
                        </tooltip>
                    </RadioButton>
                </HBox>
            </VBox>

            <!-- 4. Director (automático - docente actual) -->
            <Label text="Director:" GridPane.rowIndex="3" GridPane.columnIndex="0"
                   styleClass="formato-a-label"/>
            <HBox spacing="10" GridPane.rowIndex="3" GridPane.columnIndex="1" alignment="CENTER_LEFT">
                <ImageView fitWidth="20" fitHeight="20">
                    <Image url="@../../images/icons/user.png"/>
                </ImageView>
                <Label fx:id="nombreDocenteLabel" text="Dr. Juan Pérez (Usted)"
                       styleClass="formato-a-docente-label"/>
            </HBox>

            <!-- 5. Codirector (Opcional) -->
            <Label text="Codirector (Opcional):" GridPane.rowIndex="4" GridPane.columnIndex="0"
                   styleClass="formato-a-label"/>
            <ComboBox fx:id="codirectorComboBox" GridPane.rowIndex="4" GridPane.columnIndex="1"
                      promptText="Seleccione un codirector..." styleClass="formato-a-combobox"/>

            <!-- 6. Programa Académico -->
            <Label text="* Programa:" GridPane.rowIndex="5" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <ComboBox fx:id="programaComboBox" GridPane.rowIndex="5" GridPane.columnIndex="1"
                      styleClass="formato-a-combobox">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="Ingeniería de Sistemas"/>
                        <String fx:value="Ingeniería Electrónica y Telecomunicaciones"/>
                        <String fx:value="Automática Industrial"/>
                        <String fx:value="Tecnología en Telemática"/>
                    </FXCollections>
                </items>
            </ComboBox>

            <!-- 7. Objetivo General -->
            <Label text="* Objetivo General:" GridPane.rowIndex="6" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <TextArea fx:id="objetivoGeneralTextArea" GridPane.rowIndex="6" GridPane.columnIndex="1"
                      promptText="Describa el objetivo principal del proyecto..."
                      styleClass="formato-a-textarea"/>

            <!-- 8. Objetivos Específicos -->
            <Label text="* Objetivos Específicos:" GridPane.rowIndex="7" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <VBox styleClass="formato-a-objetivos-container" spacing="10" GridPane.rowIndex="7" GridPane.columnIndex="1">
                <TextArea fx:id="objetivoEspecifico1TextArea" promptText="Objetivo específico 1..."
                          styleClass="formato-a-textarea-small"/>
                <TextArea fx:id="objetivoEspecifico2TextArea" promptText="Objetivo específico 2..."
                          styleClass="formato-a-textarea-small"/>
                <TextArea fx:id="objetivoEspecifico3TextArea" promptText="Objetivo específico 3..."
                          styleClass="formato-a-textarea-small"/>
                <Button text="+ Agregar otro objetivo" styleClass="formato-a-link-button"
                        onAction="#agregarObjetivoEspecifico"/>
            </VBox>

            <!-- 9. Archivo del Formato A (PDF) -->
            <Label text="* Formato A (PDF):" GridPane.rowIndex="8" GridPane.columnIndex="0"
                   styleClass="formato-a-label required-field"/>
            <VBox spacing="10" GridPane.rowIndex="8" GridPane.columnIndex="1">
                <HBox spacing="10">
                    <TextField fx:id="archivoPdfTextField" editable="false" HBox.hgrow="ALWAYS"
                               promptText="Seleccione el archivo PDF del Formato A..."
                               styleClass="formato-a-textfield"/>
                    <Button text="Examinar" onAction="#seleccionarArchivoPdf"
                            styleClass="formato-a-secondary-button"/>
                </HBox>
                <Label text="Formato: PDF | Tamaño máximo: 10MB" styleClass="formato-a-hint"/>
            </VBox>

            <!-- 10. Carta de Aceptación (Solo para Práctica Profesional) -->
            <VBox fx:id="cartaAceptacionContainer" visible="false" managed="false"
                  GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="9"
                  styleClass="formato-a-carta-container">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="* Carta de Aceptación de Empresa:"
                           styleClass="formato-a-label required-field"/>
                    <Label text="(Requerido para Práctica Profesional)" styleClass="formato-a-carta-label"/>
                </HBox>
                <HBox spacing="10" styleClass="formato-a-carta-input">
                    <TextField fx:id="cartaAceptacionTextField" editable="false" HBox.hgrow="ALWAYS"
                               promptText="Seleccione la carta de aceptación de la empresa..."
                               styleClass="formato-a-textfield"/>
                    <Button text="Examinar" onAction="#seleccionarCartaAceptacion"
                            styleClass="formato-a-secondary-button"/>
                </HBox>
                <Label text="Formato: PDF | Debe incluir sello y firma de la empresa"
                       styleClass="formato-a-hint"/>
            </VBox>

        </GridPane>

        <!-- Sección de Información Importante -->
        <VBox styleClass="formato-a-info-section" spacing="10">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <ImageView fitWidth="24" fitHeight="24">
                    <Image url="@../../images/icons/notification.png"/>
                </ImageView>
                <Label text="Notificación Automática" styleClass="formato-a-info-title"/>
            </HBox>
            <Label text="Al enviar este Formato A, el sistema enviará automáticamente una notificación por correo electrónico al coordinador del programa para su evaluación."
                   styleClass="formato-a-info-text"/>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <ImageView fitWidth="16" fitHeight="16">
                    <Image url="@../../images/icons/time.png"/>
                </ImageView>
                <Label text="Tiempo estimado de respuesta: 5-10 días hábiles"
                       styleClass="formato-a-info-hint"/>
            </HBox>
        </VBox>

        <!-- Botones de Acción -->
        <HBox styleClass="formato-a-actions" spacing="20" alignment="CENTER_RIGHT">
            <Button text="Cancelar" onAction="#cancelar" styleClass="formato-a-secondary-button"/>
            <Button text="Enviar Formato A" onAction="#enviarFormatoA" styleClass="formato-a-primary-button"/>
        </HBox>

        <!-- Pie de página informativo -->
        <VBox styleClass="formato-a-footer" spacing="5">
            <Separator styleClass="formato-a-separator"/>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <ImageView fitWidth="16" fitHeight="16">
                    <Image url="@../../images/icons/warning.png"/>
                </ImageView>
                <Label text="Importante:" styleClass="formato-a-warning-title"/>
            </HBox>
            <Label text="1. Verifique que toda la información sea correcta antes de enviar."
                   styleClass="formato-a-warning-text"/>
            <Label text="2. Una vez enviado, no podrá modificar el Formato A hasta recibir evaluación del coordinador."
                   styleClass="formato-a-warning-text"/>
            <Label text="3. El estudiante recibirá una notificación cuando el coordinador evalúe el Formato A."
                   styleClass="formato-a-warning-text"/>
        </VBox>

    </VBox>
</ScrollPane>