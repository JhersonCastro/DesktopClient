<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.collections.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="formato-a-scrollpane" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.fronted.controllers.DocenteNuevoFormatoAController">

    <stylesheets>
        <URL value="@../../css/formulario-formato-a.css" />
    </stylesheets>

    <VBox spacing="25" styleClass="formato-a-container">

        <!-- Encabezado -->
        <VBox spacing="10" styleClass="formato-a-header">
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Button onAction="#regresarAlDashboard" styleClass="back-button">
                    <graphic>
                        <ImageView fitHeight="24" fitWidth="24" preserveRatio="true">
                            <Image url="@../../images/icons/back.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                    <Image url="@../../images/format-a.png" />
                </ImageView>
                <VBox spacing="5">
                    <Label styleClass="formato-a-title" text="Nuevo Formato A" />
                    <Label styleClass="formato-a-subtitle" text="Complete el formulario para iniciar un nuevo proyecto de grado" />
                </VBox>
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="formato-a-step-indicator">
                <Label styleClass="formato-a-step-label" text="Paso 1: Información básica" />
                <Region HBox.hgrow="ALWAYS" />
                <Label styleClass="formato-a-required-label" text="* Campos obligatorios" />
            </HBox>
        </VBox>

        <!-- Contenedor principal del formulario -->
        <GridPane hgap="25" styleClass="formato-a-grid" vgap="20">
            <columnConstraints>
                <ColumnConstraints halignment="RIGHT" prefWidth="200" />
                <ColumnConstraints hgrow="ALWAYS" prefWidth="450" />
            </columnConstraints>

            <!-- 1. Selección de Estudiante -->
            <Label styleClass="formato-a-label" text="* Estudiante:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <VBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="0">
                <TextField fx:id="estudianteTextField" promptText="Escriba nombre, email o código y presione ENTER..." styleClass="formato-a-autocomplete" />

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <ImageView fitHeight="16" fitWidth="16">
                        <Image url="@../../images/icons/info.png" />
                    </ImageView>
                    <Label styleClass="formato-a-hint" text="Presione ENTER después de escribir para buscar estudiantes" />
                </HBox>
            </VBox>

            <!-- Contenedor para resultados de búsqueda -->
            <VBox fx:id="resultadosBusquedaContainer" managed="false" styleClass="resultados-busqueda-container" visible="false" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="1">
                <Label styleClass="resultados-title" text="Resultados de búsqueda:" />
                <VBox fx:id="resultadosList" spacing="5" styleClass="resultados-list" />
            </VBox>

            <!-- 2. Título del Proyecto -->
            <Label styleClass="formato-a-label" text="* Título del Proyecto:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
            <TextField fx:id="tituloTextField" promptText="Ej: Sistema de gestión de proyectos de grado para la Universidad del Cauca" styleClass="formato-a-textfield" GridPane.columnIndex="1" GridPane.rowIndex="2" />

            <!-- 3. Modalidad -->
            <Label styleClass="formato-a-label" text="* Modalidad:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
            <VBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="3">
                <HBox spacing="30">
                    <RadioButton fx:id="radioInvestigacion" selected="true" styleClass="formato-a-radiobutton" text="Investigación" userData="INVESTIGACION">
                        <tooltip>
                            <Tooltip styleClass="formato-a-tooltip" text="Proyecto de investigación académica" />
                        </tooltip>
                    </RadioButton>
                    <RadioButton fx:id="radioPracticaProfesional" styleClass="formato-a-radiobutton" text="Práctica Profesional" userData="PRACTICA_PROFESIONAL">
                        <tooltip>
                            <Tooltip styleClass="formato-a-tooltip" text="Proyecto realizado en empresa con carta de aceptación" />
                        </tooltip>
                    </RadioButton>
                </HBox>
            </VBox>

            <!-- 4. Director (automático - docente actual) -->
            <Label styleClass="formato-a-label" text="Director:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
            <HBox alignment="CENTER_LEFT" spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="4">
                <ImageView fitHeight="20" fitWidth="20">
                    <Image url="@../../images/icons/user.png" />
                </ImageView>
                <Label fx:id="nombreDocenteLabel" styleClass="formato-a-docente-label" text="Dr. Juan Pérez (Usted)" />
            </HBox>

            <!-- 5. Codirector (Opcional) -->
            <Label styleClass="formato-a-label" text="Codirector (Opcional):" GridPane.columnIndex="0" GridPane.rowIndex="5" />
            <ComboBox fx:id="codirectorComboBox" promptText="Seleccione un codirector..." styleClass="formato-a-combobox" GridPane.columnIndex="1" GridPane.rowIndex="5" />

            <!-- 6. Programa Académico -->
            <Label styleClass="formato-a-label" text="* Programa:" GridPane.columnIndex="0" GridPane.rowIndex="6" />
            <ComboBox fx:id="programaComboBox" styleClass="formato-a-combobox" GridPane.columnIndex="1" GridPane.rowIndex="6">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="Ingeniería de Sistemas" />
                        <String fx:value="Ingeniería Electrónica y Telecomunicaciones" />
                        <String fx:value="Automática Industrial" />
                        <String fx:value="Tecnología en Telemática" />
                    </FXCollections>
                </items>
            </ComboBox>

            <!-- 7. Objetivo General -->
            <Label styleClass="formato-a-label" text="* Objetivo General:" GridPane.columnIndex="0" GridPane.rowIndex="7" />
            <TextArea fx:id="objetivoGeneralTextArea" promptText="Describa el objetivo principal del proyecto..." styleClass="formato-a-textarea" GridPane.columnIndex="1" GridPane.rowIndex="7" />

            <!-- 8. Objetivos Específicos -->
            <Label styleClass="formato-a-label" text="* Objetivos Específicos:" GridPane.columnIndex="0" GridPane.rowIndex="8" />
            <VBox spacing="10" styleClass="formato-a-objetivos-container" GridPane.columnIndex="1" GridPane.rowIndex="8">
                <TextArea fx:id="objetivoEspecifico1TextArea" promptText="Objetivo específico 1..." styleClass="formato-a-textarea-small" />
                <TextArea fx:id="objetivoEspecifico2TextArea" promptText="Objetivo específico 2..." styleClass="formato-a-textarea-small" />
                <TextArea fx:id="objetivoEspecifico3TextArea" promptText="Objetivo específico 3..." styleClass="formato-a-textarea-small" />
                <Button onAction="#agregarObjetivoEspecifico" styleClass="formato-a-link-button" text="+ Agregar otro objetivo" />
            </VBox>

            <!-- 9. Archivo del Formato A (PDF) -->
            <Label styleClass="formato-a-label" text="* Formato A (PDF):" GridPane.columnIndex="0" GridPane.rowIndex="9" />
            <VBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="9">
                <HBox spacing="10">
                    <TextField fx:id="archivoPdfTextField" editable="false" promptText="Seleccione el archivo PDF del Formato A..." styleClass="formato-a-textfield" HBox.hgrow="ALWAYS" />
                    <Button onAction="#seleccionarArchivoPdf" styleClass="formato-a-secondary-button" text="Examinar" />
                </HBox>
                <Label styleClass="formato-a-hint" text="Formato: PDF | Tamaño máximo: 10MB" />
            </VBox>

            <!-- 10. Carta de Aceptación (Solo para Práctica Profesional) -->
            <VBox fx:id="cartaAceptacionContainer" managed="false" styleClass="formato-a-carta-container" visible="false" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="10">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label styleClass="formato-a-label" text="* Carta de Aceptación de Empresa:" />
                    <Label styleClass="formato-a-carta-label" text="(Requerido para Práctica Profesional)" />
                </HBox>
                <HBox spacing="10" styleClass="formato-a-carta-input">
                    <TextField fx:id="cartaAceptacionTextField" editable="false" promptText="Seleccione la carta de aceptación de la empresa..." styleClass="formato-a-textfield" HBox.hgrow="ALWAYS" />
                    <Button onAction="#seleccionarCartaAceptacion" styleClass="formato-a-secondary-button" text="Examinar" />
                </HBox>
                <Label styleClass="formato-a-hint" text="Formato: PDF | Debe incluir sello y firma de la empresa" />
            </VBox>
         <rowConstraints>
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
            <RowConstraints />
         </rowConstraints>
        </GridPane>

        <!-- Sección de Información Importante -->
        <VBox spacing="10" styleClass="formato-a-info-section">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <ImageView fitHeight="24" fitWidth="24">
                    <Image url="@../../images/icons/notification.png" />
                </ImageView>
                <Label styleClass="formato-a-info-title" text="Notificación Automática" />
            </HBox>
            <Label styleClass="formato-a-info-text" text="Al enviar este Formato A, el sistema enviará automáticamente una notificación por correo electrónico al coordinador del programa para su evaluación." />
            <HBox alignment="CENTER_LEFT" spacing="10">
                <ImageView fitHeight="16" fitWidth="16">
                    <Image url="@../../images/icons/time.png" />
                </ImageView>
                <Label styleClass="formato-a-info-hint" text="Tiempo estimado de respuesta: 5-10 días hábiles" />
            </HBox>
        </VBox>

        <!-- Botones de Acción -->
        <HBox alignment="CENTER_RIGHT" spacing="20" styleClass="formato-a-actions">
            <Button onAction="#cancelar" styleClass="formato-a-secondary-button" text="Cancelar" />
            <Button onAction="#enviarFormatoA" styleClass="formato-a-primary-button" text="Enviar Formato A" />
        </HBox>

        <!-- Pie de página informativo -->
        <VBox spacing="5" styleClass="formato-a-footer">
            <Separator styleClass="formato-a-separator" />
            <HBox alignment="CENTER_LEFT" spacing="10">
                <ImageView fitHeight="16" fitWidth="16">
                    <Image url="@../../images/icons/warning.png" />
                </ImageView>
                <Label styleClass="formato-a-warning-title" text="Importante:" />
            </HBox>
            <Label styleClass="formato-a-warning-text" text="1. Verifique que toda la información sea correcta antes de enviar." />
            <Label styleClass="formato-a-warning-text" text="2. Una vez enviado, no podrá modificar el Formato A hasta recibir evaluación del coordinador." />
            <Label styleClass="formato-a-warning-text" text="3. El estudiante recibirá una notificación cuando el coordinador evalúe el Formato A." />
        </VBox>
    </VBox>
</ScrollPane>
