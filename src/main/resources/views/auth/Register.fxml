<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="org.example.fronted.controllers.RegisterController"
      stylesheets="@../../css/register.css"
      styleClass="register-content"
      alignment="CENTER"
      maxWidth="800" maxHeight="650"
      minWidth="600" minHeight="550"
      prefWidth="700" prefHeight="620">

    <!-- Tarjeta principal del registro -->
    <VBox styleClass="register-card" spacing="25">
        <padding>
            <Insets top="40" right="40" bottom="40" left="40"/>
        </padding>

        <!-- Header del registro -->
        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="register-header">
            <ImageView fitWidth="50" fitHeight="50" styleClass="register-logo">
                <Image url="@../../images/logo.png"/>
            </ImageView>

            <VBox spacing="5">
                <Label text="Registro" styleClass="register-title"/>
                <Label text="Crea tu cuenta institucional" styleClass="register-subtitle"/>
            </VBox>
        </HBox>

        <!-- ScrollPane para formularios largos -->
        <ScrollPane styleClass="form-scroll" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <VBox spacing="20">
                <!-- GridPane para campos en 2 columnas -->
                <GridPane hgap="20" vgap="15" styleClass="form-grid">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="50"/>
                        <ColumnConstraints percentWidth="50"/>
                    </columnConstraints>

                    <!-- Fila 1: Nombre y Apellidos -->
                    <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <Label text="Nombre *" styleClass="field-label"/>
                        <TextField fx:id="txtNames" promptText="Nombres completos" styleClass="text-field"/>
                        <Label fx:id="lblNamesError" styleClass="error-label" visible="false"/>
                    </VBox>

                    <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <Label text="Apellidos *" styleClass="field-label"/>
                        <TextField fx:id="txtLastNames" promptText="Apellidos" styleClass="text-field"/>
                        <Label fx:id="lblLastNamesError" styleClass="error-label" visible="false"/>
                    </VBox>

                    <!-- Fila 2: Email (ocupa 2 columnas) -->
                    <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="1" GridPane.columnSpan="2">
                        <Label text="Correo electrónico *" styleClass="field-label"/>
                        <TextField fx:id="txtEmail" promptText="ejemplo@unicauca.edu.co" styleClass="text-field"/>
                        <Label fx:id="lblEmailError" styleClass="error-label" visible="false"/>
                    </VBox>

                    <!-- Fila 3: Contraseña y Confirmación -->
                    <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="2">
                        <Label text="Contraseña *" styleClass="field-label"/>
                        <PasswordField fx:id="txtPassword" promptText="Mínimo 8 caracteres" styleClass="text-field"/>
                        <Label fx:id="lblPasswordError" styleClass="error-label" visible="false"/>
                    </VBox>

                    <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="2">
                        <Label text="Confirmar contraseña *" styleClass="field-label"/>
                        <PasswordField fx:id="txtConfirmPassword" promptText="Repita la contraseña" styleClass="text-field"/>
                        <Label fx:id="lblConfirmPasswordError" styleClass="error-label" visible="false"/>
                    </VBox>

                    <!-- Fila 4: Roles (ocupa 2 columnas) -->
                    <VBox spacing="10" GridPane.columnIndex="0" GridPane.rowIndex="3" GridPane.columnSpan="2">
                        <Label text="Selecciona tu(s) rol(es) *" styleClass="field-label"/>
                        <HBox spacing="15" alignment="CENTER_LEFT" styleClass="roles-container">
                            <CheckBox fx:id="chkEstudiante" text="Estudiante" styleClass="role-checkbox"/>
                            <CheckBox fx:id="chkDirector" text="Director" styleClass="role-checkbox"/>
                            <CheckBox fx:id="chkCoordinador" text="Coordinador" styleClass="role-checkbox"/>
                            <CheckBox fx:id="chkJurado" text="Jurado" styleClass="role-checkbox"/>
                            <CheckBox fx:id="chkJefeDepartamento" text="Jefe Depto" styleClass="role-checkbox"/>
                        </HBox>
                        <Label fx:id="lblRolesError" styleClass="error-label" visible="false"/>
                    </VBox>

                    <!-- Fila 5: Teléfono (ocupa 2 columnas) -->
                    <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="4" GridPane.columnSpan="2">
                        <Label text="Teléfono (opcional)" styleClass="field-label"/>
                        <TextField fx:id="txtPhone" promptText="Número de contacto" styleClass="text-field"/>
                        <Label fx:id="lblPhoneError" styleClass="error-label" visible="false"/>
                    </VBox>
                </GridPane>

                <!-- Términos y condiciones -->
                <VBox spacing="15" styleClass="terms-section">
                    <CheckBox fx:id="chkTerms"
                              text="Acepto los términos y condiciones del sistema y autorizo el tratamiento de mis datos personales según la política de privacidad de la Universidad del Cauca."
                              styleClass="terms-checkbox"
                              wrapText="true"/>

                    <Label fx:id="lblRegisterMessage"
                           styleClass="message-label"
                           textAlignment="CENTER"
                           wrapText="true"
                           maxWidth="600"/>
                </VBox>
            </VBox>
        </ScrollPane>

        <!-- Botones de acción -->
        <VBox spacing="15" alignment="CENTER" styleClass="action-buttons">
            <Button fx:id="btnRegister"
                    text="REGISTRARSE"
                    onAction="#handleRegister"
                    styleClass="primary-button"
                    prefWidth="280" prefHeight="50"/>

            <HBox alignment="CENTER" spacing="5">
                <Label text="¿Ya tienes cuenta?" styleClass="link-text"/>
                <Button text="Iniciar Sesión"
                        onAction="#handleBackToLogin"
                        styleClass="link-button"/>
            </HBox>
        </VBox>
    </VBox>
</VBox>